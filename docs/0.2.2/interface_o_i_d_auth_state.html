<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>AppAuth: OIDAuthState Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AppAuth
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Instance Methods</a> &#124;
<a href="#pub-static-methods">Class Methods</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="class_o_i_d_auth_state-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">OIDAuthState Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A convenience class that retains the auth state between <code><a class="el" href="interface_o_i_d_authorization_response.html" title="Represents the response to an authorization request. ">OIDAuthorizationResponse</a>s</code> and <code><a class="el" href="interface_o_i_d_token_response.html" title="Represents the response to an token request. ">OIDTokenResponse</a>s</code>.  
 <a href="interface_o_i_d_auth_state.html#details">More...</a></p>

<p><code>#import &lt;<a class="el" href="_o_i_d_auth_state_8h_source.html">OIDAuthState.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for OIDAuthState:</div>
<div class="dyncontent">
 <div class="center">
  <img src="interface_o_i_d_auth_state.png" usemap="#OIDAuthState_map" alt=""/>
  <map id="OIDAuthState_map" name="OIDAuthState_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Instance Methods</h2></td></tr>
<tr class="memitem:a6c56220ad796c1d251dd90f00a77dacb"><td class="memItemLeft" align="right" valign="top">(nullable instancetype)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_o_i_d_auth_state.html#a6c56220ad796c1d251dd90f00a77dacb">initWithAuthorizationResponse:</a></td></tr>
<tr class="memdesc:a6c56220ad796c1d251dd90f00a77dacb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates an auth state from an authorization response.  <a href="#a6c56220ad796c1d251dd90f00a77dacb">More...</a><br /></td></tr>
<tr class="separator:a6c56220ad796c1d251dd90f00a77dacb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeedad38ac6f64379d7c1e3a3500bd5a3"><td class="memItemLeft" align="right" valign="top">(nullable instancetype)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_o_i_d_auth_state.html#aeedad38ac6f64379d7c1e3a3500bd5a3">initWithAuthorizationResponse:tokenResponse:</a></td></tr>
<tr class="memdesc:aeedad38ac6f64379d7c1e3a3500bd5a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates an auth state from an authorization response.  <a href="#aeedad38ac6f64379d7c1e3a3500bd5a3">More...</a><br /></td></tr>
<tr class="separator:aeedad38ac6f64379d7c1e3a3500bd5a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40d6393772704fead9f94914ef7c7d96"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_o_i_d_auth_state.html#a40d6393772704fead9f94914ef7c7d96">updateWithAuthorizationResponse:error:</a></td></tr>
<tr class="memdesc:a40d6393772704fead9f94914ef7c7d96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the authorization state based on a new authorization response.  <a href="#a40d6393772704fead9f94914ef7c7d96">More...</a><br /></td></tr>
<tr class="separator:a40d6393772704fead9f94914ef7c7d96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46768db03d6fef96bf5b1168cd46a5cf"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_o_i_d_auth_state.html#a46768db03d6fef96bf5b1168cd46a5cf">updateWithTokenResponse:error:</a></td></tr>
<tr class="memdesc:a46768db03d6fef96bf5b1168cd46a5cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the authorization state based on a new token response.  <a href="#a46768db03d6fef96bf5b1168cd46a5cf">More...</a><br /></td></tr>
<tr class="separator:a46768db03d6fef96bf5b1168cd46a5cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ba5254b21b3478b7dbe87aaebf7f984"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_o_i_d_auth_state.html#a8ba5254b21b3478b7dbe87aaebf7f984">updateWithAuthorizationError:</a></td></tr>
<tr class="memdesc:a8ba5254b21b3478b7dbe87aaebf7f984"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the authorization state based on an authorization error.  <a href="#a8ba5254b21b3478b7dbe87aaebf7f984">More...</a><br /></td></tr>
<tr class="separator:a8ba5254b21b3478b7dbe87aaebf7f984"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84855fe29a247709bcd8842002e6325c"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_o_i_d_auth_state.html#a84855fe29a247709bcd8842002e6325c">withFreshTokensPerformAction:</a></td></tr>
<tr class="memdesc:a84855fe29a247709bcd8842002e6325c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls the block with a valid access token (refreshing it first, if needed), or if a refresh was needed and failed, with the error that caused it to fail.  <a href="#a84855fe29a247709bcd8842002e6325c">More...</a><br /></td></tr>
<tr class="separator:a84855fe29a247709bcd8842002e6325c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a1184336115ca9221c60eaf91cf4a0d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5a1184336115ca9221c60eaf91cf4a0d"></a>
(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_o_i_d_auth_state.html#a5a1184336115ca9221c60eaf91cf4a0d">setNeedsTokenRefresh</a></td></tr>
<tr class="memdesc:a5a1184336115ca9221c60eaf91cf4a0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forces a token refresh the next time <code><a class="el" href="interface_o_i_d_auth_state.html#a84855fe29a247709bcd8842002e6325c" title="Calls the block with a valid access token (refreshing it first, if needed), or if a refresh was neede...">withFreshTokensPerformAction:</a></code> is called, even if the current tokens are considered valid. <br /></td></tr>
<tr class="separator:a5a1184336115ca9221c60eaf91cf4a0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a294aae0260f325b919989b21878a4478"><td class="memItemLeft" align="right" valign="top">(nullable <a class="el" href="interface_o_i_d_token_request.html">OIDTokenRequest</a> *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_o_i_d_auth_state.html#a294aae0260f325b919989b21878a4478">tokenRefreshRequest</a></td></tr>
<tr class="memdesc:a294aae0260f325b919989b21878a4478"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a token request suitable for refreshing an access token.  <a href="#a294aae0260f325b919989b21878a4478">More...</a><br /></td></tr>
<tr class="separator:a294aae0260f325b919989b21878a4478"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0b2f25b94bdf9d39062ff0821ca7ba0"><td class="memItemLeft" align="right" valign="top">(nullable <a class="el" href="interface_o_i_d_token_request.html">OIDTokenRequest</a> *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_o_i_d_auth_state.html#aa0b2f25b94bdf9d39062ff0821ca7ba0">tokenRefreshRequestWithAdditionalParameters:</a></td></tr>
<tr class="memdesc:aa0b2f25b94bdf9d39062ff0821ca7ba0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a token request suitable for refreshing an access token.  <a href="#aa0b2f25b94bdf9d39062ff0821ca7ba0">More...</a><br /></td></tr>
<tr class="separator:aa0b2f25b94bdf9d39062ff0821ca7ba0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Class Methods</h2></td></tr>
<tr class="memitem:afce4760327976a5dd751978f0f74ac65"><td class="memItemLeft" align="right" valign="top">(id&lt; <a class="el" href="protocol_o_i_d_authorization_flow_session-p.html">OIDAuthorizationFlowSession</a> &gt;)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interface_o_i_d_auth_state.html#afce4760327976a5dd751978f0f74ac65">authStateByPresentingAuthorizationRequest:presentingViewController:callback:</a></td></tr>
<tr class="memdesc:afce4760327976a5dd751978f0f74ac65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convenience method to create a <code><a class="el" href="interface_o_i_d_auth_state.html" title="A convenience class that retains the auth state between OIDAuthorizationResponses and OIDTokenRespons...">OIDAuthState</a></code> by presenting an authorization request and performing the authorization code exchange in the case of code flow requests.  <a href="#afce4760327976a5dd751978f0f74ac65">More...</a><br /></td></tr>
<tr class="separator:afce4760327976a5dd751978f0f74ac65"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:a1eeffc805738c67e628d4f4c2af44c5c"><td class="memItemLeft" align="right" valign="top">NSString *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_o_i_d_auth_state.html#a1eeffc805738c67e628d4f4c2af44c5c">refreshToken</a></td></tr>
<tr class="memdesc:a1eeffc805738c67e628d4f4c2af44c5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The most recent refresh token received from the server.  Rather than using this property directly, you should call <code><a class="el" href="interface_o_i_d_auth_state.html#a84855fe29a247709bcd8842002e6325c" title="Calls the block with a valid access token (refreshing it first, if needed), or if a refresh was neede...">withFreshTokensPerformAction:</a></code>.  <a href="#a1eeffc805738c67e628d4f4c2af44c5c">More...</a><br /></td></tr>
<tr class="separator:a1eeffc805738c67e628d4f4c2af44c5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9e01d527e5fc811df1de758677084d6"><td class="memItemLeft" align="right" valign="top">NSString *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_o_i_d_auth_state.html#aa9e01d527e5fc811df1de758677084d6">scope</a></td></tr>
<tr class="memdesc:aa9e01d527e5fc811df1de758677084d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The scope of the current authorization grant.  This represents the latest scope returned by the server and may be a subset of the scope that was initially granted.  <a href="#aa9e01d527e5fc811df1de758677084d6">More...</a><br /></td></tr>
<tr class="separator:aa9e01d527e5fc811df1de758677084d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75c9d9d8cc73ec3aa8d8a8fe7c38cec2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a75c9d9d8cc73ec3aa8d8a8fe7c38cec2"></a>
<a class="el" href="interface_o_i_d_authorization_response.html">OIDAuthorizationResponse</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_o_i_d_auth_state.html#a75c9d9d8cc73ec3aa8d8a8fe7c38cec2">lastAuthorizationResponse</a></td></tr>
<tr class="memdesc:a75c9d9d8cc73ec3aa8d8a8fe7c38cec2"><td class="mdescLeft">&#160;</td><td class="mdescRight">The most recent authorization response used to update the authorization state. For the implicit flow, this will contain the latest access token. <br /></td></tr>
<tr class="separator:a75c9d9d8cc73ec3aa8d8a8fe7c38cec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2472bbc19aed11650238b989ca82a806"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2472bbc19aed11650238b989ca82a806"></a>
<a class="el" href="interface_o_i_d_token_response.html">OIDTokenResponse</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_o_i_d_auth_state.html#a2472bbc19aed11650238b989ca82a806">lastTokenResponse</a></td></tr>
<tr class="memdesc:a2472bbc19aed11650238b989ca82a806"><td class="mdescLeft">&#160;</td><td class="mdescRight">The most recent token response used to update this authorization state. This will contain the latest access token. <br /></td></tr>
<tr class="separator:a2472bbc19aed11650238b989ca82a806"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad17c6329a07116262935c5b99eb90262"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad17c6329a07116262935c5b99eb90262"></a>
NSError *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_o_i_d_auth_state.html#ad17c6329a07116262935c5b99eb90262">authorizationError</a></td></tr>
<tr class="memdesc:ad17c6329a07116262935c5b99eb90262"><td class="mdescLeft">&#160;</td><td class="mdescRight">The authorization error that invalidated this <code><a class="el" href="interface_o_i_d_auth_state.html" title="A convenience class that retains the auth state between OIDAuthorizationResponses and OIDTokenRespons...">OIDAuthState</a></code>.  The authorization error encountered by <code><a class="el" href="interface_o_i_d_auth_state.html" title="A convenience class that retains the auth state between OIDAuthorizationResponses and OIDTokenRespons...">OIDAuthState</a></code> or set by the user via <code><a class="el" href="interface_o_i_d_auth_state.html#a8ba5254b21b3478b7dbe87aaebf7f984" title="Updates the authorization state based on an authorization error. ">updateWithAuthorizationError:</a></code> that invalidated this <code><a class="el" href="interface_o_i_d_auth_state.html" title="A convenience class that retains the auth state between OIDAuthorizationResponses and OIDTokenRespons...">OIDAuthState</a></code>. Authorization errors from <code><a class="el" href="interface_o_i_d_auth_state.html" title="A convenience class that retains the auth state between OIDAuthorizationResponses and OIDTokenRespons...">OIDAuthState</a></code> will always have a domain of <code><a class="el" href="_o_i_d_error_8h.html#a0e49f6bd992c4004ffe2526050e508a5" title="The error domain for OAuth specific errors on the authorization endpoint.  This error domain is used ...">OIDOAuthAuthorizationErrorDomain</a></code> or <code><a class="el" href="_o_i_d_error_8h.html#a0de6e1a465ab973ed465268560555c76" title="The error domain for OAuth specific errors on the token endpoint.  This error domain is used when the...">OIDOAuthTokenErrorDomain</a></code>. Note: that after unarchiving the <code><a class="el" href="interface_o_i_d_auth_state.html" title="A convenience class that retains the auth state between OIDAuthorizationResponses and OIDTokenRespons...">OIDAuthState</a></code> object, the <code><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSError_Class/#//apple_ref/occ/instp/NSError/userInfo">NSError.userInfo</a></code> property of this error will be nil. <br /></td></tr>
<tr class="separator:ad17c6329a07116262935c5b99eb90262"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3b5eca71dabad64aeff6906c428071d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab3b5eca71dabad64aeff6906c428071d"></a>
BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_o_i_d_auth_state.html#ab3b5eca71dabad64aeff6906c428071d">isAuthorized</a></td></tr>
<tr class="memdesc:ab3b5eca71dabad64aeff6906c428071d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns YES if the authorization state is not known to be invalid.  Returns YES if no OAuth errors have been received, and the last call resulted in a successful access token or id token. This does not mean that the access is fresh - just that it was valid the last time it was used. Note that network and other transient errors do not invalidate the authorized state. If NO, you should authenticate the user again, using a fresh authorization request. Invalid <code><a class="el" href="interface_o_i_d_auth_state.html" title="A convenience class that retains the auth state between OIDAuthorizationResponses and OIDTokenRespons...">OIDAuthState</a></code> objects may still be useful in that case, to hint at the previously authorized user and streamline the re-authentication experience. <br /></td></tr>
<tr class="separator:ab3b5eca71dabad64aeff6906c428071d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bb0b484ec24366c65fdcadcc4810582"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6bb0b484ec24366c65fdcadcc4810582"></a>
id&lt; <a class="el" href="protocol_o_i_d_auth_state_change_delegate-p.html">OIDAuthStateChangeDelegate</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_o_i_d_auth_state.html#a6bb0b484ec24366c65fdcadcc4810582">stateChangeDelegate</a></td></tr>
<tr class="memdesc:a6bb0b484ec24366c65fdcadcc4810582"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <code><a class="el" href="protocol_o_i_d_auth_state_change_delegate-p.html" title="Delegate of the OIDAuthState used to monitor various changes in state. ">OIDAuthStateChangeDelegate</a></code> delegate.  Use the delegate to observe state changes (and update storage) as well as error states. <br /></td></tr>
<tr class="separator:a6bb0b484ec24366c65fdcadcc4810582"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c4a147bf00e0e40092267d7e6f1fb12"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7c4a147bf00e0e40092267d7e6f1fb12"></a>
id&lt; <a class="el" href="protocol_o_i_d_auth_state_error_delegate-p.html">OIDAuthStateErrorDelegate</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_o_i_d_auth_state.html#a7c4a147bf00e0e40092267d7e6f1fb12">errorDelegate</a></td></tr>
<tr class="memdesc:a7c4a147bf00e0e40092267d7e6f1fb12"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <code><a class="el" href="protocol_o_i_d_auth_state_error_delegate-p.html" title="Delegate of the OIDAuthState used to monitor errors. ">OIDAuthStateErrorDelegate</a></code> delegate.  Use the delegate to observe state changes (and update storage) as well as error states. <br /></td></tr>
<tr class="separator:a7c4a147bf00e0e40092267d7e6f1fb12"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A convenience class that retains the auth state between <code><a class="el" href="interface_o_i_d_authorization_response.html" title="Represents the response to an authorization request. ">OIDAuthorizationResponse</a>s</code> and <code><a class="el" href="interface_o_i_d_token_response.html" title="Represents the response to an token request. ">OIDTokenResponse</a>s</code>. </p>
</div><h2 class="groupheader">Method Documentation</h2>
<a class="anchor" id="afce4760327976a5dd751978f0f74ac65"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ authStateByPresentingAuthorizationRequest: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_o_i_d_authorization_request.html">OIDAuthorizationRequest</a> *)&#160;</td>
          <td class="paramname"><em>authorizationRequest</em></td>
        </tr>
        <tr>
          <td class="paramkey">presentingViewController:</td>
          <td></td>
          <td class="paramtype">(UIViewController *)&#160;</td>
          <td class="paramname"><em>presentingViewController</em></td>
        </tr>
        <tr>
          <td class="paramkey">callback:</td>
          <td></td>
          <td class="paramtype">(<a class="el" href="_o_i_d_auth_state_8h.html#a1352e5680750f420d89cc7e0cd3826f3">OIDAuthStateAuthorizationCallback</a>)&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convenience method to create a <code><a class="el" href="interface_o_i_d_auth_state.html" title="A convenience class that retains the auth state between OIDAuthorizationResponses and OIDTokenRespons...">OIDAuthState</a></code> by presenting an authorization request and performing the authorization code exchange in the case of code flow requests. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">authorizationRequest</td><td>The authorization request to present. </td></tr>
    <tr><td class="paramname">presentingViewController</td><td>The view controller from which to present the <code><a href="https://developer.apple.com/library/ios/documentation/SafariServices/Reference/SFSafariViewController_Ref/index.html">SFSafariViewController</a></code>. </td></tr>
    <tr><td class="paramname">callback</td><td>The method called when the request has completed or failed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <code><a class="el" href="protocol_o_i_d_authorization_flow_session-p.html" title="Represents an in-flight authorization flow session. ">OIDAuthorizationFlowSession</a></code> instance which will terminate when it receives a <code><a class="el" href="protocol_o_i_d_authorization_flow_session-p.html#a62eaa5fa1f26aba67f488015e12ec556" title="Cancels the code flow session, invoking the request&#39;s callback with a cancelled error. ">cancel (OIDAuthorizationFlowSession-p)</a></code> message, or after processing a <code><a class="el" href="protocol_o_i_d_authorization_flow_session-p.html#ab8d9fe5037597390d5d2bfd3dc540971" title="Clients should call this method with the result of the authorization code flow if it becomes availabl...">resumeAuthorizationFlowWithURL: (OIDAuthorizationFlowSession-p)</a></code> message. </dd></dl>

</div>
</div>
<a class="anchor" id="a6c56220ad796c1d251dd90f00a77dacb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- initWithAuthorizationResponse: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_o_i_d_authorization_response.html">OIDAuthorizationResponse</a> *)&#160;</td>
          <td class="paramname"><em>authorizationResponse</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates an auth state from an authorization response. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">response</td><td>The authorization response. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aeedad38ac6f64379d7c1e3a3500bd5a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- <a class="el" href="interface_o_i_d_auth_state.html#a6c56220ad796c1d251dd90f00a77dacb">initWithAuthorizationResponse:</a> </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_o_i_d_authorization_response.html">OIDAuthorizationResponse</a> *)&#160;</td>
          <td class="paramname"><em>authorizationResponse</em></td>
        </tr>
        <tr>
          <td class="paramkey">tokenResponse:</td>
          <td></td>
          <td class="paramtype">(nullable <a class="el" href="interface_o_i_d_token_response.html">OIDTokenResponse</a> *)&#160;</td>
          <td class="paramname"><em>tokenResponse</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates an auth state from an authorization response. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">response</td><td>The authorization response. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a294aae0260f325b919989b21878a4478"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- tokenRefreshRequest </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a token request suitable for refreshing an access token. </p>
<dl class="section return"><dt>Returns</dt><dd>A <code><a class="el" href="interface_o_i_d_token_request.html" title="Represents a token request. ">OIDTokenRequest</a></code> suitable for using a refresh token to obtain a new access token.  After performing the refresh, call <code><a class="el" href="interface_o_i_d_auth_state.html#a46768db03d6fef96bf5b1168cd46a5cf" title="Updates the authorization state based on a new token response. ">updateWithTokenResponse:error:</a></code> to update the authorization state based on the response. Rather than doing the token refresh yourself, you should use <code><a class="el" href="interface_o_i_d_auth_state.html#a84855fe29a247709bcd8842002e6325c" title="Calls the block with a valid access token (refreshing it first, if needed), or if a refresh was neede...">withFreshTokensPerformAction:</a></code>. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="https://tools.ietf.org/html/rfc6749#section-1.5">https://tools.ietf.org/html/rfc6749#section-1.5</a> </dd></dl>

</div>
</div>
<a class="anchor" id="aa0b2f25b94bdf9d39062ff0821ca7ba0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- tokenRefreshRequestWithAdditionalParameters: </td>
          <td></td>
          <td class="paramtype">(nullable NSDictionary&lt;NSString *, NSString *&gt; *)&#160;</td>
          <td class="paramname"><em>additionalParameters</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a token request suitable for refreshing an access token. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">additionalParameters</td><td>Additional parameters for the token request. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <code><a class="el" href="interface_o_i_d_token_request.html" title="Represents a token request. ">OIDTokenRequest</a></code> suitable for using a refresh token to obtain a new access token.  After performing the refresh, call <code><a class="el" href="interface_o_i_d_auth_state.html#a46768db03d6fef96bf5b1168cd46a5cf" title="Updates the authorization state based on a new token response. ">updateWithTokenResponse:error:</a></code> to update the authorization state based on the response. Rather than doing the token refresh yourself, you should use <code><a class="el" href="interface_o_i_d_auth_state.html#a84855fe29a247709bcd8842002e6325c" title="Calls the block with a valid access token (refreshing it first, if needed), or if a refresh was neede...">withFreshTokensPerformAction:</a></code>. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="https://tools.ietf.org/html/rfc6749#section-1.5">https://tools.ietf.org/html/rfc6749#section-1.5</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a8ba5254b21b3478b7dbe87aaebf7f984"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- updateWithAuthorizationError: </td>
          <td></td>
          <td class="paramtype">(NSError *)&#160;</td>
          <td class="paramname"><em>authorizationError</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the authorization state based on an authorization error. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">authorizationError</td><td>The authorization error.  Call this method if you receive an authorization error during an API call to invalidate the authentication state of this <code><a class="el" href="interface_o_i_d_auth_state.html" title="A convenience class that retains the auth state between OIDAuthorizationResponses and OIDTokenRespons...">OIDAuthState</a></code>. Don't call with errors unrelated to authorization, such as transient network errors. The <a class="el" href="protocol_o_i_d_auth_state_error_delegate-p.html#ab498dbe44b2d8ee025ae8141f0ac44e7" title="Called when an authentication occurs, which indicates the auth session is invalid. ">authState:didEncounterAuthorizationError: (OIDAuthStateErrorDelegate-p)</a> method of <code><a class="el" href="interface_o_i_d_auth_state.html#a7c4a147bf00e0e40092267d7e6f1fb12" title="The OIDAuthStateErrorDelegate delegate.  Use the delegate to observe state changes (and update storag...">errorDelegate</a></code> will be called with the error. You may optionally use the convenience method <a class="el" href="interface_o_i_d_error_utilities.html#a9aea416f87a249fcdc53447ace423368" title="Creates a NSError indicating that the resource server responded with an authorization error...">resourceServerAuthorizationErrorWithCode:errorResponse:underlyingError: (OIDErrorUtilities)</a> to create <code><a href="https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSError_Class/">NSError</a></code> objects for use here. The latest error received is stored in <code><a class="el" href="interface_o_i_d_auth_state.html#ad17c6329a07116262935c5b99eb90262" title="The authorization error that invalidated this OIDAuthState.  The authorization error encountered by O...">authorizationError</a></code>. Note: that after unarchiving this object, the <code><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSError_Class/#//apple_ref/occ/instp/NSError/userInfo">NSError.userInfo</a></code> property of this error will be nil. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a40d6393772704fead9f94914ef7c7d96"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- updateWithAuthorizationResponse: </td>
          <td></td>
          <td class="paramtype">(nullable <a class="el" href="interface_o_i_d_authorization_response.html">OIDAuthorizationResponse</a> *)&#160;</td>
          <td class="paramname"><em>authorizationResponse</em></td>
        </tr>
        <tr>
          <td class="paramkey">error:</td>
          <td></td>
          <td class="paramtype">(nullable NSError *)&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the authorization state based on a new authorization response. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">authorizationResponse</td><td>The new authorization response to update the state with. </td></tr>
    <tr><td class="paramname">error</td><td>Any error encountered when performing the authorization request. Errors in the domain <code><a class="el" href="_o_i_d_error_8h.html#a0e49f6bd992c4004ffe2526050e508a5" title="The error domain for OAuth specific errors on the authorization endpoint.  This error domain is used ...">OIDOAuthAuthorizationErrorDomain</a></code> are reflected in the auth state, other errors are assumed to be transient, and ignored.  Typically called with the response from an incremental authorization request, or if using the implicit flow. Will clear the <code><a class="el" href="interface_o_i_d_auth_state.html#a2472bbc19aed11650238b989ca82a806" title="The most recent token response used to update this authorization state. This will contain the latest ...">lastTokenResponse</a></code> property. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a46768db03d6fef96bf5b1168cd46a5cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- updateWithTokenResponse: </td>
          <td></td>
          <td class="paramtype">(nullable <a class="el" href="interface_o_i_d_token_response.html">OIDTokenResponse</a> *)&#160;</td>
          <td class="paramname"><em>tokenResponse</em></td>
        </tr>
        <tr>
          <td class="paramkey">error:</td>
          <td></td>
          <td class="paramtype">(nullable NSError *)&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the authorization state based on a new token response. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tokenResponse</td><td>The new token response to update the state from. </td></tr>
    <tr><td class="paramname">error</td><td>Any error encountered when performing the authorization request. Errors in the domain <code><a class="el" href="_o_i_d_error_8h.html#a0de6e1a465ab973ed465268560555c76" title="The error domain for OAuth specific errors on the token endpoint.  This error domain is used when the...">OIDOAuthTokenErrorDomain</a></code> are reflected in the auth state, other errors are assumed to be transient, and ignored.  Typically called with the response from an authorization code exchange, or a token refresh. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a84855fe29a247709bcd8842002e6325c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- withFreshTokensPerformAction: </td>
          <td></td>
          <td class="paramtype">(OIDAuthStateAction)&#160;</td>
          <td class="paramname"><em>action</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calls the block with a valid access token (refreshing it first, if needed), or if a refresh was needed and failed, with the error that caused it to fail. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">action</td><td>The block to execute with a fresh token. This block will be executed on the main thread. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Property Documentation</h2>
<a class="anchor" id="a1eeffc805738c67e628d4f4c2af44c5c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- refreshToken</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span><span class="mlabel">nonatomic</span><span class="mlabel">assign</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The most recent refresh token received from the server.  Rather than using this property directly, you should call <code><a class="el" href="interface_o_i_d_auth_state.html#a84855fe29a247709bcd8842002e6325c" title="Calls the block with a valid access token (refreshing it first, if needed), or if a refresh was neede...">withFreshTokensPerformAction:</a></code>. </p>
<dl class="section remark"><dt>Remarks</dt><dd>refresh_token </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="https://tools.ietf.org/html/rfc6749#section-5.1">https://tools.ietf.org/html/rfc6749#section-5.1</a> </dd></dl>

</div>
</div>
<a class="anchor" id="aa9e01d527e5fc811df1de758677084d6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- scope</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">read</span><span class="mlabel">nonatomic</span><span class="mlabel">assign</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The scope of the current authorization grant.  This represents the latest scope returned by the server and may be a subset of the scope that was initially granted. </p>
<dl class="section remark"><dt>Remarks</dt><dd>scope </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Source/<a class="el" href="_o_i_d_auth_state_8h_source.html">OIDAuthState.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
